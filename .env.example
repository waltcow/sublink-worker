# Sublink Worker Environment Variables
# Copy this file to .env and configure your settings

# ============================================
# Node Filtering Configuration
# ============================================

# Default exclude keywords for node filtering (applied to all subscriptions)
# Supports comma-separated string or JSON array format
#
# Example 1: Comma-separated string
# DEFAULT_EXCLUDE=测试,过期,试用,到期
#
# Example 2: JSON array
# DEFAULT_EXCLUDE=["测试","过期","试用","到期"]
#
# Leave empty to disable default filtering
DEFAULT_EXCLUDE=

# ============================================
# Redis Configuration
# ============================================

# Redis connection (choose one method)

# Method 1: Redis URL (complete connection string)
# REDIS_URL=redis://localhost:6379

# Method 2: Individual parameters
REDIS_HOST=redis
REDIS_PORT=6379
# REDIS_USERNAME=
# REDIS_PASSWORD=
# REDIS_TLS=false

# Redis key prefix for namespacing
REDIS_KEY_PREFIX=sublink

# ============================================
# Storage Configuration
# ============================================

# Configuration TTL (Time To Live) in seconds
# Default: 2592000 (30 days)
CONFIG_TTL_SECONDS=2592000

# Short link TTL in seconds
# Leave empty for no expiration
# SHORT_LINK_TTL_SECONDS=86400

# ============================================
# Subscription Cache Configuration
# ============================================

# Subscription cache TTL (Time To Live) in seconds
# Default: 300 (5 minutes)
# Set to 0 to disable caching
# Benefits:
#   - Reduces response latency (avoid repeated fetches)
#   - Reduces load on external subscription servers
#   - Saves bandwidth costs
#   - Mitigates rate limiting issues
SUBSCRIPTION_CACHE_TTL=300

# ============================================
# Upstash KV Configuration (Alternative to Redis)
# ============================================

# If you prefer Upstash instead of Redis, uncomment these:
# KV_REST_API_URL=https://your-endpoint.upstash.io
# KV_REST_API_TOKEN=your-token-here

# Disable in-memory KV fallback (if no Redis/Upstash configured)
# DISABLE_MEMORY_KV=false

# ============================================
# Server Configuration
# ============================================

# Server port
PORT=8787

# Static files directory
STATIC_DIR=public
